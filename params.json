{"name":"Zend Document management system","tagline":"Simple Document management system for ZF2","body":"The DMS lets you manage your documents for [Zend Framework 2](http://framework.zend.com/).\r\n\r\n# Installation\r\n\r\n## Prequisites :\r\n\r\nBefore installing DMS module, please be sure the following PHP depencies are installed on your apache server:\r\n- libreoffice-headers\r\n- uniconv\r\n\r\n\r\n\r\n## With composer (recommended) :\r\n\r\nComposer helps to manage dependencies in PHP projects. Find more info here: <http://getcomposer.org>\r\n\r\nAdd this package (`buse974/dms`) to your `composer.json` file, or just run the following at the\r\ncommand line:\r\n\r\n```\r\n$ composer require buse974/dms\r\n```\r\n\r\n## By cloning project :\r\n\r\nInstall the [DMS] (https://github.com/buse974/Dms.git) module by cloning it into `./vendor/` directory.\r\n\r\n## Post-installation\r\n\r\nThis package follows the [PSR-0](http://www.php-fig.org/psr/psr-0/) autoloading standard. If you are\r\nusing composer to install, you just require the generated autoloader:\r\n\r\n```php\r\nrequire \"<projectpath>/vendor/autoload.php\";\r\n```\r\n\r\n### Install daemon unoconv\r\n\r\nExecute the script `vendor/buse974/dms/bin/unoconv.sh` like a deamon.\r\n\r\n**examples**\r\n\r\n    vendor/buse974/dms/bin/unoconv.sh start\r\n    vendor/buse974/dms/bin/unoconv.sh stop\r\n\r\n### Application config file\r\nEnabling it in your `application.config.php` file.\r\n\r\n```php\r\n<?php\r\nreturn array(\r\n    'modules' => array(\r\n        'Dms',\r\n    ),\r\n    'module_paths' => array(\r\n       'Dms' => __DIR__ . '/../vendor/buse974/dms',\r\n    ),\r\n),\r\n);\r\n```\r\n### Local file config\r\n\r\nCopy and paste the following configuration in your `config/autoloader/local.php`. You can find this configuration in `<application_path>/vendor/buse974/dms/config/local.php.dist`\r\n\r\n```php\r\n'dms-conf' => array(\r\n    /*\r\n     * Allowed sizes - You can add as many as you need\r\n     */\r\n    'size_allowed' => array(                    \r\n                array('width' => 300, 'height' => 200),\r\n                array('width' => 300, 'height' => 300),\r\n                array('width' => 150, 'height' => 100),\r\n                array('width' => 80, 'height' => 80),\r\n                array('width' => 300),\r\n        ),\r\n        /*\r\n         * path where all the documents will be uploaded\r\n         */\r\n        'default_path' => 'upload/',      \r\n        /*\r\n         * http adapter - You have to add your [http adapter](#HTTP-adapter) \r\n         * in your config/autoloader/local.php or config/autoloader/global.php\r\n         * If you already have a http adapter, please just specify its name\r\n         */\r\n        'adapter' => 'http-adapter',             \r\n        'convert' => array(\r\n                /* \r\n                 * path where you want to convert and stock the temporaries files\r\n                 * !! apache need all rights for writing and reading on this directory !!\r\n                 */\r\n                'tmp' => '/tmp/',    \r\n        ),\r\n        /*\r\n         * the headers to add to your files - especially for cross-domain\r\n         */\r\n        'headers'=> array(                        \r\n                'Access-Control-Allow-Origin'=>'http://local.wow.in',\r\n                'Access-Control-Allow-Credentials'=>'true'\r\n        ),\r\n),\r\n```\r\n### HTTP adapter (if it does not exist yet)\r\n\r\n```php\r\n'http-adapter' => array(\r\n        'adapter' => 'Zend\\Http\\Client\\Adapter\\Socket',\r\n        'maxredirects'   => 5,\r\n        'timeout'        => 10,\r\n        'sslverifypeer' => false,\r\n),\r\n```\r\n\r\n# Usage\r\n\r\n## By DMS service\r\n\r\n### Add a document\r\n\r\n```php\r\n$manager = $this->serviceManager->get('dms.service');\r\n\r\n/*\r\n *  exemple\r\n */\r\n$image = file_get_contents(__DIR__ . '/../../_file/gnu.png');\r\n\r\n/*\r\n * string - document's codings specified in `dma/coding/CodingInterface`\r\n */\r\n$document['coding'] = 'base';  \r\n\r\n/*\r\n * mime-type\r\n */\r\n$document['type'] = 'image/png';  \r\n\r\n/*\r\n * datas with specified encoding\r\n * if you choose url coding, you can add the picture url which will be uploaded and saved\r\n */\r\n$document['data'] =  base64_encode($image);        \r\n\r\n/*\r\n * Return the document's token\r\n */\r\n$token = $manager->add($document);   \r\n```\r\n\r\nTo access this file use this url http://\\<dns\\>/data/\\<token\\> .\r\n\r\n### Resize a document\r\n\r\nFollowing the previous example\r\n\r\n```php\r\n/*\r\n *  width x height in a string - Return a new token for the document resized\r\n */\r\n$new_token = $manager->resize('80x80');    \r\n```\r\n\r\nTo access this file use this url http://\\<dns\\>/data/\\<new_token\\> .\r\n\r\n## By DMS manager\r\n\r\n\r\n### Add and get a document\r\n\r\n```php\r\n\r\n$manager = $this->serviceManager->get('dms.manager');\r\n\r\n/*\r\n * file exemple\r\n */\r\n$image = file_get_contents(__DIR__ . '/../../_file/gnu.png');\r\n\r\n$document = new Dms\\Document\\Document();\r\n$document->setDatas($image); \r\n$document->setFormat('png');            \r\n\r\n\r\n$manager->loadDocument($document);  \r\n\r\n$manager->setFormat('jpg');\r\n$manager->setSize('80x80'); \r\n$manager->writeFile();\r\n\r\n/*\r\n * Get the document\r\n */\r\n$document = $manager->getDocument();\r\n\r\n/*\r\n * Return the document's token\r\n */\r\n$token = $document->getId();\r\n```\r\n\r\n## Access by url\r\n\r\nDocument can be accessed by URL.\r\n\r\nUrls are formated like this :\r\n\r\n    http://mondomaine.com/<KEY>/<TOKEN>-<SIZE>[<NUM-PAGE>].<FORMAT>\r\n    \r\nDocuments are automatically converted and created if they do not exist.  \r\n\r\n**KEY can be** \r\n\r\n    data \r\n    size\r\n    description\r\n    format\r\n    encoding\r\n\r\n    \r\n###Examples\r\n\r\n**Basic document**\r\n\r\n    http://mondomaine.com/data/2b5c466bf06d665b479e85c48ec733d235d138\r\n    \r\nThis url displays document with token 2b5c466bf06d665b479e85c48ec733d235d138\r\n\r\n**Document with size convertion**\r\n\r\n    http://mondomaine.com/data/2b5c466bf06d665b479e85c48ec733d235d138-300x300\r\n    \r\nThis url displays document with token 2b5c466bf06d665b479e85c48ec733d235d138 and converts it in 300x300 pixel\r\n\r\n**Document with format convertion**\r\n\r\n    http://mondomaine.com/data/2b5c466bf06d665b479e85c48ec733d235d138.pdf\r\n    \r\nThis url displays document with token 2b5c466bf06d665b479e85c48ec733d235d138 and converts it in pdf\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}